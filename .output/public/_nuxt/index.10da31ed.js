import{a as I,f as O,e as C,r as n,x as k,o as z,h as B,i as t,w as a,v as x,t as p,j as m,k as d,y as g,l as D,z as A}from"./entry.180298d6.js";const F={setup(){const f=O(),{auth:o}=C(),v=n(!0),e=n(""),b=n("");let u=n(""),s=n("");const P=n(""),i=n(!1),w=n(""),c=n(""),y=n(""),E=n(""),h=n("");let _=n("");k(()=>{f.value&&A("/tasks")});const S=async()=>{i.value=!0;const{user:r,error:l}=await o.signInWithOtp({phone:`+254${e.value}`});l?(i.value=!1,u.value=l.message,setTimeout(()=>{u.value=""},5e3),console.log(l)):console.log(r)},V=async()=>{i.value=!0;const{user:r,error:l}=await o.signUp({email:y.value,password:h.value});l?(i.value=!1,c.value=l.message,setTimeout(()=>{c.value=""},5e3),console.log(l)):(i.value=!1,s.value="VERIFY! your email to continue to login!",y.value="",h.value="",console.log(r))},W=async()=>{i.value=!0;const{user:r,error:l}=await o.signInWithPassword({email:E.value,password:_.value});l?(i.value=!1,c.value=l.message,setTimeout(()=>{c.value=""},5e3),console.log(l)):console.log(r)},j=async()=>{i.value=!0;const{data:r,error:l}=await o.verifyOtp({phone:`+254${e.value}`,token:b.value,type:"sms"});l?(i.value=!1,u.value=l.message,setTimeout(()=>{u.value=""},5e3),console.log(l)):console.log(r)},T=async()=>{i.value=!0;const{data:r,error:l}=await o.resetPasswordForEmail(w.value,{redirectTo:"https://bcpxyrcfxzdmxjqggixm.supabase.co/auth/v1/callback/ResetPassword/"});l&&(i.value=!1,c.value=l.message,setTimeout(()=>{c.value=""},5e3),console.log(l)),console.log(r)};return k(()=>{o.onAuthStateChange(async(r,l)=>{if(r=="PASSWORD_RECOVERY"){const M=prompt("What would you like your new password to be?"),{data:U,error:R}=await o.updateUser({password:M});U&&alert("Password updated successfully!"),R&&alert("There was an error updating your password.")}})},[]),{user:f,auth:o,newPassword:P,signInWithPhone:S,verifyPhoneWithToken:j,token:b,open:v,emailSuccess:s,emailErrMsg:c,emailReset:w,loading:i,phone:e,errMsg:u,email:y,signInWithEmail:V,verifyEmail:W,confirmEmail:E,password:h,confirmPassword:_,resetPasswordWithMail:T}}},N={class:"bg-gray-900 flex justify-center flex-col items-center mx-auto"},Y={class:"flex flex-col items-center justify-center relative"},q={class:"bg-slate-900 flex-col gap-y-3 min-h-screen px-2 text-white flex mx-auto"},G=t("h1",{class:"text-2xl font-bold text-white mt-1 flex justify-center items-center mx-auto"}," SignUp with phone. ",-1),H=t("label",{for:"phone",class:"text-white"},"Enter your phone.",-1),J=["disabled"],K=t("h1",{class:"text-2xl font-bold"},"OTP Verification",-1),L=t("div",{class:"flex flex-col mt-4"},[t("span",null,"Enter the OTP you received")],-1),Q=["disabled"],X={class:"flex flex-col items-center justify-center mx-auto bg-slate-900"},Z={class:"bg-slate-900 flex-col gap-y-3 min-h-screen px-2 text-white flex mx-auto"},$=t("h1",{class:"text-2xl font-bold text-white mt-1 flex justify-center items-center mx-auto"}," OR ",-1),ee=t("h1",{class:"text-2xl font-bold text-white mt-1 flex justify-center items-center mx-auto"}," SignUp with Email. ",-1),te=t("label",{for:"phone",class:"text-white"},"Enter your email.",-1),oe=t("label",{for:"password",class:"text-white"},"Enter your password.",-1),se=["disabled"],le=t("h1",{class:"text-2xl font-bold"},"Email Verification",-1),ne=["disabled"],ie={class:"bg-gray-800 flex-col p-2 rounded-sm text-white flex justify-center mb-3 items-center mx-auto"},ae=t("h1",{class:"text-lg font-bold text-white mt-1 flex justify-center items-center mx-auto"},[D(" forgot password? reset. "),t("span",{class:"text-sm italic"},"(coming soon!)")],-1),re=["disabled"];function de(f,o,v,e,b,u){return z(),B("section",N,[t("section",Y,[t("div",q,[G,a(t("div",{class:"bg-red-400 text-white py-2 px-1 border-l-8 border-red-700 rounded-lg"},p(e.errMsg),513),[[x,e.errMsg]]),t("form",{onSubmit:o[1]||(o[1]=m((...s)=>e.signInWithPhone&&e.signInWithPhone(...s),["prevent"])),class:"flex justify-center gap-y-2 items-center mx-auto flex-col bg-slate-800 p-3 rounded-md"},[H,a(t("input",{type:"number","onUpdate:modelValue":o[0]||(o[0]=s=>e.phone=s),class:"border-none ring-2 ring-indigo-600 rounded-md text-black px-7 py-2",placeholder:"phone.."},null,512),[[d,e.phone]]),t("input",{type:"submit",value:"Send",class:g([[e.loading?"submitting..":"submit"],"bg-indigo-600 text-white px-14 py-2 rounded-md"]),disabled:e.loading},null,10,J)],32),t("form",{onSubmit:o[4]||(o[4]=m((...s)=>e.verifyPhoneWithToken&&e.verifyPhoneWithToken(...s),["prevent"])),class:"flex justify-center gap-y-2 items-center mx-auto flex-col bg-slate-800 p-3 rounded-md"},[K,L,a(t("input",{type:"number","onUpdate:modelValue":o[2]||(o[2]=s=>e.phone=s),class:"border-none ring-2 ring-indigo-600 rounded-md text-black px-7 py-2",placeholder:"phone.."},null,512),[[d,e.phone]]),a(t("input",{type:"number","onUpdate:modelValue":o[3]||(o[3]=s=>e.token=s),class:"border-none ring-2 ring-indigo-600 rounded-md text-black px-7 py-2",placeholder:"your token."},null,512),[[d,e.token]]),t("input",{type:"submit",value:"Verify",class:g([[e.loading?"verifying..":"submit"],"bg-indigo-600 text-white px-14 py-2 rounded-md"]),disabled:e.loading},null,10,Q)],32),t("section",X,[t("div",Z,[$,ee,a(t("div",{class:"bg-red-400 text-white py-2 px-1 border-l-8 border-red-700 rounded-lg"},p(e.emailErrMsg),513),[[x,e.emailErrMsg]]),a(t("div",{class:"bg-blue-400 text-white py-2 px-1 border-l-8 border-indigo-700 rounded-lg"},p(e.emailSuccess),513),[[x,e.emailSuccess]]),t("form",{onSubmit:o[7]||(o[7]=m((...s)=>e.signInWithEmail&&e.signInWithEmail(...s),["prevent"])),class:"flex justify-center gap-y-2 items-center mx-auto flex-col bg-slate-800 p-3 rounded-md"},[te,a(t("input",{type:"email","onUpdate:modelValue":o[5]||(o[5]=s=>e.email=s),autocomplete:"",class:"border-none ring-2 ring-indigo-600 rounded-md text-black px-7 py-2",placeholder:"email.."},null,512),[[d,e.email]]),oe,a(t("input",{type:"password","onUpdate:modelValue":o[6]||(o[6]=s=>e.password=s),class:"border-none ring-2 ring-indigo-600 rounded-md text-black px-7 py-2",placeholder:"password.."},null,512),[[d,e.password]]),t("input",{type:"submit",value:"Send",class:g(["bg-indigo-600 text-white px-14 py-2 rounded-md",[e.loading?"submitting..":"submit"]]),disabled:e.loading},null,10,se)],32),t("form",{onSubmit:o[10]||(o[10]=m((...s)=>e.verifyEmail&&e.verifyEmail(...s),["prevent"])),class:"flex justify-center gap-y-2 items-center mx-auto flex-col bg-slate-800 p-3 rounded-md"},[le,a(t("input",{type:"email","onUpdate:modelValue":o[8]||(o[8]=s=>e.confirmEmail=s),class:"border-none ring-2 ring-indigo-600 rounded-md text-black px-7 py-2",placeholder:"email.."},null,512),[[d,e.confirmEmail]]),a(t("input",{type:"password","onUpdate:modelValue":o[9]||(o[9]=s=>e.confirmPassword=s),class:"border-none ring-2 ring-indigo-600 rounded-md text-black px-7 py-2",placeholder:"your password."},null,512),[[d,e.confirmPassword]]),t("input",{type:"submit",value:"Verify",disabled:e.loading,class:g([[e.loading?"verifying..":"submit"],"bg-indigo-600 text-white px-14 py-2 rounded-md"])},null,10,ne)],32),t("div",ie,[ae,a(t("div",{class:"bg-red-400 text-white py-2 px-1 border-l-8 border-red-700 rounded-lg"},p(e.emailErrMsg),513),[[x,e.emailErrMsg]]),t("form",{onSubmit:o[12]||(o[12]=m((...s)=>e.resetPasswordWithMail&&e.resetPasswordWithMail(...s),["prevent"])),class:"flex justify-center gap-y-2 items-center mx-auto flex-col bg-slate-800 p-3 rounded-md"},[a(t("input",{type:"email","onUpdate:modelValue":o[11]||(o[11]=s=>e.emailReset=s),class:"border-none ring-2 ring-indigo-600 rounded-md text-black px-7 py-2",placeholder:"email.."},null,512),[[d,e.emailReset]]),t("input",{type:"submit",value:"Reset",class:g(["no-underline px-7 py-2 bg-indigo-600 rounded-lg text-indigo-100",[e.loading?"resetting":"Reset"]]),disabled:e.loading},null,10,re)],32)])])])])])])}const ue=I(F,[["render",de]]);export{ue as default};
